\section{Operators}

\productname{} supports a number of built-in operators. In this section the operators
of \productname{} are described using the format:

\operator[LeftOperandType]{operator}{RightOperandType}{ReturnType}

A star (\opstar) means that a value of any type is applicable as an
operand.

The available types are described in \secref{sec:types}.
Operations that are not described in this section can be considered invalid.

\subsection{Operator precedence}

The operator precedence is a set of rules clarifying which operations, in an expression,
should be performed first. The reason for operator precedence in programming languages,
is to. 

\tab[\textwidth]{operatorPrecedence}{2}{The precedence of operators in \productname{}.}
         {Operator precedence}
  {Level}{Operator & Description}{
    \tabrow{1}{\texttt{f[]} & Function/constructor invocation and list access}
    \tabrow{2}{\texttt{r.m r.m[]} & Record member access and member invocation}
    \tabrow{3}{\texttt{-} & Unary negation operation}
    \tabrow{4}{\texttt{* / \%} & Multiplication, division, and modulo}
    \tabrow{5}{\texttt{+ -} & Addition and subtraction}
    \tabrow{6}{\texttt{< > <= >=} & Comparison operators}
    \tabrow{7}{\texttt{== != is} & Equality operators and type checking}
    \tabrow{8}{\texttt{and or} & Logical $and$ and $or$}
    \tabrow{9}{\texttt{not} & Logical $not$}
    \tabrow{10}{\texttt{if let \#} & if-, let-, and lambda-expressions}
}

\subsection{Boolean operators}

These operators only accept boolean operands and only return boolean values.
\begin{dlist}
  \item \operator[Boolean]{and}{Boolean}{Boolean}\\
    Returns true when both operands are true and false otherwise. 
  \item \operator[Boolean]{or}{Boolean}{Boolean}\\
    Returns true when at least one of the operands are true and false otherwise.
  \item \operator{not}{Boolean}{Boolean}\\
    Returns true if the single operand is false and false otherwise.
\end{dlist}

\subsection{Comparison operators}

These operators are used when comparing two values, they will always return
boolean values.
\begin{dlist}
  \item \operator[Integer]{<}{Integer}{Boolean}\\
    Returns true if the left operand is less than the right one.
  \item \operator[Integer]{>}{Integer}{Boolean}\\
    Returns true if the left operand is greater than the right one.
  \item \operator[Integer]{<=}{Integer}{Boolean}\\
    Returns true if the left operand is less than or equal to the right one.
  \item \operator[Integer]{>=}{Integer}{Boolean}\\
    Returns true if the left operand is greater than or equal to the right one.
  \item \operator[\opstar]{==}{\opstar}{Boolean}\\
    Returns true if the left operand is equal to the right one.
  \item \operator[\opstar]{!=}{\opstar}{Boolean}\\
    Returns true if the left operand is not equal to the right one.
  \item \operator[\opstar]{is}{Type}{Boolean}\\
    Returns true if the type of the first operand is equal to or inherits from
    the type operand.
\end{dlist}

\subsection{Integer operators}

The following operations are possible on integers:
\begin{dlist}
  \item \operator{-}{Integer}{Integer} \\
    Integer negation.
  \item \operator[Integer]{+}{Integer}{Integer} \\
    Integer addition.
  \item \operator[Integer]{-}{Integer}{Integer} \\
    Integer subtraction.
  \item \operator[Integer]{*}{Integer}{Integer} \\
    Integer multiplication.
  \item \operator[Integer]{/}{Integer}{Integer} \\
    Integer division.
  \item \operator[Integer]{\%}{Integer}{Integer} \\
    Integer modulo operation.
\end{dlist}

\subsection{String operators}

It is possible to concatenate strings:
\begin{dlist}
  \item \operator[String]{+}{String}{String} \\
    Returns the concatenation of two strings.
  \item \operator[String]{+}{\opstar}{String} \\
   \operator[\opstar]{+}{String}{String} \\
    Returns the concatenation of a string and the string-representation of another type
\end{dlist}

\subsection{List operators}

Some operators are available for list values as well:
\begin{dlist}
\item \operator[List]{+}{List}{List} \\
  Returns a list containing all elements from the first list followed
  by all elements from the second list.
\item \operator[List]{-}{List}{List} \\
  Returns a list containing all the elements from the first list that
  do not exist in the second list.
\item \operator[List]{+}{\opstar}{List} \\
  Appends any element on to the end of a list, and returns the resulting list.
\item \operator[List]{-}{\opstar} \\
  Returns a list containing the elements that do not match the right operand.
\item \operator[\opstar]{+}{List}{List} \\
  Prepends any element on to the start of a list, and returns the resulting list.
\end{dlist}

\subsection{Direction and coordinate operators}

It is possible to manipulate directions and coordinates using the following operator:
\begin{dlist}
  \item \operator[Direction]{+}{Direction}{Direction} \\
    Add a direction (vector) to another direction.
  \item \operator[Direction]{-}{Direction}{Direction} \\
    Subtract a direction from another direction.
  \item \operator[Direction]{+}{Coordinate}{Coordinate} \\
    Add a coordinate to a direction.
  \item \operator{-}{Direction}{Direction} \\
    Negate a direction.
  \item \operator[Coordinate]{-}{Coordinate}{Direction} \\
    Returns the distance between two coordinates as a direction.
  \item \operator[Coordinate]{+}{Direction}{Coordinate} \\
    Add a direction to a coordinate. 
  \item \operator[Coordinate]{-}{Direction}{Coordinate} \\
    Subtract a direction from a coordinate.
\end{dlist}
For instance adding the directions \texttt{n} and \texttt{e} produces a
direction equivalent with the direction \texttt{ne}. Adding a coordinate and direction (and visa versa) gives a coordinate. As an example, $\texttt{A2} \verb!+! \texttt{e}$ gives \texttt{B2}. More information
about the coordinate and direction types is available in \secref{sec:types}.


