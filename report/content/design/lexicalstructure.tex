\section{Lexical structure}
\label{sec:lexicalstructure}

This section presents the low-level non-terminals of \productname{}.

\subsection{Notational Conventions}
We use a variant of Extended Backus-Naur Form to express the context-free grammar of
our programming language.

Each production rule assigns an expression of terminals, non-terminals and operations
to a non-terminal. E.g. in the following example the non-terminal $decimal$ is assigned
the possible terminals of $\gter{0}$ up to and including $\gter{9}$.

\begin{ebnf}
\grule{decimal}{\gter{0} \gor \gter{1} \gor \grange \gor \gter{9}}
\end{ebnf}

The following operations are used throughout this section to describe the grammar of the programming language:

\begin{center}
\begin{tabular}{r l}
  $\gopt{pattern}$ & an optional pattern \\
  $\grep{pattern}$ & zero or more repititions of pattern \\
  $\ggrp{pattern}$ & a group \\
  $pattern_1 \gor pattern_2$ & a selection \\
  $\gter{0} \gor \grange \gor \gter{9}$ & a range of terminals \\
  $pattern_1 \gex pattern_2$ & matched by $pattern_1$ but not by $pattern_2$\\
  $pattern_1 \gcat pattern_2$ & concatenation of $pattern_1$ and $pattern_2$ \\
  $\gter{test}$ & a terminal \\
  $\gtsq$ & a terminal single quotation mark \\
  $\gtdq$ & a terminal double quotation mark \\
  $\gtbs$ & a terminal backslash character \\
\end{tabular}
\end{center}

\subsection{Character Classes}
To be able to describe which characters or symbols a non-terminal can consist of in a concise manner, we need to define some sets of symbols to specific names which we can use in the description of our grammar.

The following classes of characters will be used throughout this section:

\begin{ebnf}
\grule{decimal}{\gter{0} \gor \gter{1} \gor \grange \gor \gter{9}}
\grule{lowercase}{\gter{a} \gor \gter{b} \gor \grange \gor \gter{z}}
\grule{uppercase}{\gter{A} \gor \gter{B} \gor \grange \gor \gter{Z}}
\grule{anycase}{lowercase \gor uppercase}
\grule{alphanum}{anycase \gor decimal}
\grule{quotebs}{\gtdq \gor \gtbs}
\grule{unichar}{\gcomment{any unicode character}}
\grule{strchar}{unichar \gex quotebs}
\end{ebnf}

\subsection{Comments}

\subsection{Reserved keywords}

\begin{ebnf}
\grule{reserved}{\gter{define} \gor \gter{type}}
\end{ebnf}

\subsection{Identifiers}

\begin{ebnf}
%Identifiers
\grule{constant}{\ggrp{lowercase \gcat \grep{alphanum}} \gex \ggrp{reserved \gor direction}}
\grule{type}{\ggrp{uppercase \gcat \grep{alphanum}} \gex coordinate}
\grule{variable}{\gter{\$} \gcat alphanum \gcat \grep{alphanum}}
\end{ebnf}

\subsection{Literals}

\begin{ebnf}
%Literals
\grule{integer}{decimal \gcat \grep{decimal}}
\grule{direction}{\gter{n} \gor \gter{s} \gor \gter{e} \gor \gter{w} \gor \gter{ne} \gor \gter{nw} \gor \gter{se} \gor \gter{sw}}
\grule{coordinate}{uppercase \gcat \grep{uppercase} \gcat decimal \gcat \grep{decimal}}
\end{ebnf}

\begin{ebnf}
\grule{string}{\gtdq \gcat \grep{strchar \gor escape} \gcat \gtdq}
\grule{escape}{\gtbs \gcat unichar}
\end{ebnf}
